# snatch_card

snatch_card game，枪卡游戏，前端使用flutter开发。具体技术介绍：https://juejin.cn/post/7258607903585353784

## 介绍

简介： 该游戏是一个抢牌游戏，玩家需要在限定的回合内尽可能多的凑齐能够组成总和为12的卡牌堆，凑齐即可加分，
其中游戏中会有4种特殊卡， 比如
红色炸弹卡（可以炸掉其他玩家卡堆里的一张卡），
黄色万能卡（任意选一张数字类型卡加入自己卡堆），
绿色交换卡（可以用自己一张卡与其他玩家交换），
蓝色修改卡（修改一张自己或者他人的数字类型卡）。
卡牌使用方法，玩家可以在游戏中探索。全部回合结束后，根据玩家分数总和计算排名

要求： 玩家卡牌堆的牌会被删除，满足其一：

1.当每一次取到的卡牌放入卡牌堆总和恰好为12时，分数+10，清空卡堆,不清空特殊卡 

2.当取到的卡牌放入卡牌堆，总和大于12，此时不加分数，清空卡堆

3.当玩家的卡堆大于6张，则会先删除之前抢的卡，直到卡牌不超过6张

游戏已部署，访问: http://139.159.234.134:8000
后端github: https://github.com/ppeew/twenty_game

## 游戏流程

1 发牌阶段

随机生成卡牌，用户数+2张，特殊卡小于等于1张，其余全是普通卡，普通卡点数1-9.
发牌之后直接进入抢牌阶段

2 抢牌阶段

用户看手速抢牌，只能拿1张牌或不拿。计时6-8s

3 出牌阶段

只能用特殊卡，计时6-18s

4 结束阶段

每个回合计算用户得分,睡眠一会，然后进入下一轮发牌，直到回合数用完

5 结算游戏

游戏结束，计算排名，分发奖励

## task

- [] 路由
- [] 画出静态页面
- [] 完善动态功能
- [] 随机生成数据模拟
- [] 添加网络请求，建立websocket
- [] 响应ws动作
- [] 加入动画效果

## 优化

将component独立成一个目录，每个组件独立成一个文件

当page过多时，建立目录分类

某个page代码量过多时，可采用逻辑和页面分离模式（MVC）,
将逻辑写入到controller中，page只负责页面渲染。其实早就该这么写了，更规范。
但内聚效果没有在组件里声明并使用强。因此，flutter即可组件中局部定义和使用，更有封闭性和紧密性。
也可以抽离逻辑到独立类中，vue3就是如此（MVCC）,但flutter的实现要监听数据变化才行，也不够方便。
最终采用局部写法，当逻辑或代码量过多时才分离。

source中各个枚举类应写入到专用的page或controller中，内聚更强。
当然多个页面公用的枚举就不迁移。
